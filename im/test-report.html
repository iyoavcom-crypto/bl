<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IM ç³»ç»Ÿæµ‹è¯•æŠ¥å‘Š</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    .header {
      background: white;
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 20px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.1);
    }
    .header h1 {
      font-size: 2.5em;
      color: #333;
      margin-bottom: 10px;
    }
    .header .meta {
      color: #666;
      font-size: 1.1em;
    }
    .summary-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }
    .card {
      background: white;
      border-radius: 16px;
      padding: 25px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.1);
      text-align: center;
    }
    .card.success {
      border-top: 4px solid #22c55e;
    }
    .card.info {
      border-top: 4px solid #3b82f6;
    }
    .card.warning {
      border-top: 4px solid #f59e0b;
    }
    .card .number {
      font-size: 3em;
      font-weight: bold;
      color: #333;
    }
    .card .label {
      color: #666;
      font-size: 1.1em;
      margin-top: 5px;
    }
    .section {
      background: white;
      border-radius: 16px;
      margin-bottom: 20px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    .section-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px 30px;
      font-size: 1.4em;
      font-weight: bold;
    }
    .section-content {
      padding: 25px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      padding: 12px 15px;
      text-align: left;
      border-bottom: 1px solid #eee;
    }
    th {
      background: #f8fafc;
      font-weight: 600;
      color: #475569;
    }
    tr:hover {
      background: #f8fafc;
    }
    .status {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.9em;
      font-weight: 500;
    }
    .status.pass {
      background: #dcfce7;
      color: #166534;
    }
    .status.fail {
      background: #fee2e2;
      color: #991b1b;
    }
    .status::before {
      content: '';
      width: 8px;
      height: 8px;
      border-radius: 50%;
    }
    .status.pass::before {
      background: #22c55e;
    }
    .status.fail::before {
      background: #ef4444;
    }
    .api-method {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 4px;
      font-size: 0.8em;
      font-weight: 600;
      margin-right: 8px;
    }
    .api-method.get { background: #dbeafe; color: #1e40af; }
    .api-method.post { background: #dcfce7; color: #166534; }
    .api-method.put { background: #fef3c7; color: #92400e; }
    .api-method.delete { background: #fee2e2; color: #991b1b; }
    .progress-bar {
      height: 8px;
      background: #e5e7eb;
      border-radius: 4px;
      overflow: hidden;
      margin-top: 10px;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #22c55e 0%, #16a34a 100%);
      border-radius: 4px;
      transition: width 0.5s ease;
    }
    .badge {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 0.85em;
      font-weight: 500;
    }
    .badge.unit { background: #e0e7ff; color: #3730a3; }
    .badge.e2e { background: #fce7f3; color: #9d174d; }
    .badge.integration { background: #d1fae5; color: #065f46; }
    .subsection {
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid #eee;
    }
    .subsection:first-child {
      margin-top: 0;
      padding-top: 0;
      border-top: none;
    }
    .subsection h3 {
      color: #334155;
      font-size: 1.2em;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .subsection h3::before {
      content: '';
      width: 4px;
      height: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 2px;
    }
    .flow-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 15px;
    }
    .flow-item {
      background: #f8fafc;
      border-radius: 10px;
      padding: 15px 20px;
      border-left: 4px solid #667eea;
    }
    .flow-item h4 {
      color: #334155;
      margin-bottom: 8px;
    }
    .flow-item p {
      color: #64748b;
      font-size: 0.9em;
    }
    .ws-event {
      display: inline-block;
      background: #f1f5f9;
      padding: 2px 8px;
      border-radius: 4px;
      font-family: monospace;
      font-size: 0.85em;
      color: #475569;
      margin: 2px;
    }
    .footer {
      text-align: center;
      color: rgba(255,255,255,0.8);
      padding: 20px;
      font-size: 0.9em;
    }
    @media (max-width: 768px) {
      .header h1 {
        font-size: 1.8em;
      }
      .card .number {
        font-size: 2em;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- æŠ¥å‘Šå¤´éƒ¨ -->
    <div class="header">
      <h1>ğŸ§ª IM ç³»ç»Ÿæµ‹è¯•æŠ¥å‘Š</h1>
      <p class="meta">
        ğŸ“… æµ‹è¯•æ—¥æœŸï¼š2026-01-26 | 
        ğŸ–¥ï¸ æµ‹è¯•ç¯å¢ƒï¼šNode.js 22 + TypeScript 5.6.3 + SQLite | 
        âœ… çŠ¶æ€ï¼š<strong style="color: #22c55e;">å…¨éƒ¨é€šè¿‡</strong>
      </p>
    </div>

    <!-- æ±‡æ€»å¡ç‰‡ -->
    <div class="summary-cards">
      <div class="card success">
        <div class="number">143</div>
        <div class="label">æµ‹è¯•ç”¨ä¾‹æ€»æ•°</div>
      </div>
      <div class="card success">
        <div class="number">143</div>
        <div class="label">é€šè¿‡æ•°é‡</div>
      </div>
      <div class="card success">
        <div class="number">0</div>
        <div class="label">å¤±è´¥æ•°é‡</div>
      </div>
      <div class="card info">
        <div class="number">100%</div>
        <div class="label">é€šè¿‡ç‡</div>
        <div class="progress-bar">
          <div class="progress-fill" style="width: 100%"></div>
        </div>
      </div>
    </div>

    <!-- æµ‹è¯•ç±»å‹æ±‡æ€» -->
    <div class="section">
      <div class="section-header">ğŸ“Š æµ‹è¯•ç±»å‹æ±‡æ€»</div>
      <div class="section-content">
        <table>
          <thead>
            <tr>
              <th>æµ‹è¯•ç±»å‹</th>
              <th>æµ‹è¯•æ¨¡å—</th>
              <th>é€šè¿‡</th>
              <th>å¤±è´¥</th>
              <th>æ€»è®¡</th>
              <th>çŠ¶æ€</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><span class="badge unit">å•å…ƒæµ‹è¯•</span></td>
              <td>JWT æ¨¡å—</td>
              <td>29</td>
              <td>0</td>
              <td>29</td>
              <td><span class="status pass">é€šè¿‡</span></td>
            </tr>
            <tr>
              <td><span class="badge e2e">E2E æµ‹è¯•</span></td>
              <td>Auth è·¯ç”±</td>
              <td>19</td>
              <td>0</td>
              <td>19</td>
              <td><span class="status pass">é€šè¿‡</span></td>
            </tr>
            <tr>
              <td><span class="badge e2e">E2E æµ‹è¯•</span></td>
              <td>IM æ¨¡å—</td>
              <td>72</td>
              <td>0</td>
              <td>72</td>
              <td><span class="status pass">é€šè¿‡</span></td>
            </tr>
            <tr>
              <td><span class="badge integration">é›†æˆæµ‹è¯•</span></td>
              <td>WebSocket é€šä¿¡</td>
              <td>23</td>
              <td>0</td>
              <td>23</td>
              <td><span class="status pass">é€šè¿‡</span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- å•å…ƒæµ‹è¯•è¯¦æƒ… -->
    <div class="section">
      <div class="section-header">ğŸ”¬ å•å…ƒæµ‹è¯•è¯¦æƒ… (29ä¸ª)</div>
      <div class="section-content">
        <div class="subsection">
          <h3>å·¥å…·å‡½æ•° (7ä¸ª)</h3>
          <table>
            <thead>
              <tr><th>æµ‹è¯•é¡¹</th><th>æè¿°</th><th>çŠ¶æ€</th></tr>
            </thead>
            <tbody>
              <tr><td>ttlToSeconds</td><td>è§£æ 15m â†’ 900s</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td>ttlToSeconds</td><td>è§£æ 7d â†’ 604800s</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td>ttlToSeconds</td><td>è§£æ 1h â†’ 3600s</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td>ttlToSeconds</td><td>è§£æçº¯æ•°å­—</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td>nowSec</td><td>è¿”å›ç§’çº§æ—¶é—´æˆ³</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td>nanoid</td><td>ç”ŸæˆæŒ‡å®šé•¿åº¦ID</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td>shortId</td><td>ç”Ÿæˆ16å­—ç¬¦ID</td><td><span class="status pass">é€šè¿‡</span></td></tr>
            </tbody>
          </table>
        </div>
        <div class="subsection">
          <h3>JwtService (5ä¸ª)</h3>
          <table>
            <thead>
              <tr><th>æµ‹è¯•é¡¹</th><th>æè¿°</th><th>çŠ¶æ€</th></tr>
            </thead>
            <tbody>
              <tr><td>signAsync</td><td>ç­¾å‘ access token</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td>signAsync</td><td>ç­¾å‘ refresh token</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td>verifyAsync</td><td>éªŒè¯æœ‰æ•ˆ token</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td>verifyAsync</td><td>æ— æ•ˆ token æŠ›å‡º AuthError</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td>rotateRefreshAsync</td><td>åˆ·æ–°ä»¤ç‰Œè½®è½¬</td><td><span class="status pass">é€šè¿‡</span></td></tr>
            </tbody>
          </table>
        </div>
        <div class="subsection">
          <h3>å®ˆå«å‡½æ•° (12ä¸ª)</h3>
          <table>
            <thead>
              <tr><th>æµ‹è¯•é¡¹</th><th>æè¿°</th><th>çŠ¶æ€</th></tr>
            </thead>
            <tbody>
              <tr><td>assertUserId</td><td>ç”¨æˆ·IDåŒ¹é…æˆåŠŸ</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td>assertUserId</td><td>åŒ¹é…å¤±è´¥æŠ›å‡º Forbidden</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td>assertRole</td><td>è§’è‰²åŒ¹é…æˆåŠŸ/å¤±è´¥</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td>assertScopes</td><td>ä½œç”¨åŸŸåŒ¹é…</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td>assertVip</td><td>VIPéªŒè¯æˆåŠŸ/å¤±è´¥</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td>assertDevice</td><td>è®¾å¤‡åŒ¹é…/ä¸åŒ¹é…/ç¦ç”¨</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td>assertTokenKind</td><td>ä»¤ç‰Œç±»å‹åŒ¹é…</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td>assertTeam</td><td>å›¢é˜ŸåŒ¹é…</td><td><span class="status pass">é€šè¿‡</span></td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- è®¤è¯æ¨¡å— API æµ‹è¯• -->
    <div class="section">
      <div class="section-header">ğŸ” è®¤è¯æ¨¡å— API æµ‹è¯• (19ä¸ª)</div>
      <div class="section-content">
        <table>
          <thead>
            <tr><th>API</th><th>æµ‹è¯•åœºæ™¯</th><th>çŠ¶æ€</th></tr>
          </thead>
          <tbody>
            <tr><td><span class="api-method post">POST</span>/api/auth/register</td><td>æ³¨å†ŒæˆåŠŸ - è¿”å›ç”¨æˆ·ä¿¡æ¯å’Œä»¤ç‰Œ</td><td><span class="status pass">é€šè¿‡</span></td></tr>
            <tr><td><span class="api-method post">POST</span>/api/auth/register</td><td>æ³¨å†Œå¤±è´¥ - æ‰‹æœºå·å·²å­˜åœ¨</td><td><span class="status pass">é€šè¿‡</span></td></tr>
            <tr><td><span class="api-method post">POST</span>/api/auth/register</td><td>æ³¨å†Œå¤±è´¥ - ç¼ºå°‘å¿…å¡«å­—æ®µ</td><td><span class="status pass">é€šè¿‡</span></td></tr>
            <tr><td><span class="api-method post">POST</span>/api/auth/register</td><td>æ³¨å†Œå¤±è´¥ - æ ¼å¼é”™è¯¯</td><td><span class="status pass">é€šè¿‡</span></td></tr>
            <tr><td><span class="api-method post">POST</span>/api/auth/login</td><td>ç™»å½•æˆåŠŸ - è¿”å›ç”¨æˆ·ä¿¡æ¯å’Œä»¤ç‰Œ</td><td><span class="status pass">é€šè¿‡</span></td></tr>
            <tr><td><span class="api-method post">POST</span>/api/auth/login</td><td>ç™»å½•å¤±è´¥ - ç”¨æˆ·ä¸å­˜åœ¨</td><td><span class="status pass">é€šè¿‡</span></td></tr>
            <tr><td><span class="api-method post">POST</span>/api/auth/login</td><td>ç™»å½•å¤±è´¥ - å¯†ç é”™è¯¯</td><td><span class="status pass">é€šè¿‡</span></td></tr>
            <tr><td><span class="api-method get">GET</span>/api/auth/me</td><td>è·å–æˆåŠŸ - è¿”å›å½“å‰ç”¨æˆ·ä¿¡æ¯</td><td><span class="status pass">é€šè¿‡</span></td></tr>
            <tr><td><span class="api-method get">GET</span>/api/auth/me</td><td>è·å–å¤±è´¥ - æœªæä¾›/æ— æ•ˆä»¤ç‰Œ</td><td><span class="status pass">é€šè¿‡</span></td></tr>
            <tr><td><span class="api-method post">POST</span>/api/auth/logout</td><td>é€€å‡ºæˆåŠŸ/å¤±è´¥</td><td><span class="status pass">é€šè¿‡</span></td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- IM æ¨¡å— API æµ‹è¯• -->
    <div class="section">
      <div class="section-header">ğŸ’¬ IM æ¨¡å— API æµ‹è¯• (72ä¸ª)</div>
      <div class="section-content">
        <div class="subsection">
          <h3>ç”¨æˆ·ç®¡ç† (6ä¸ª)</h3>
          <table>
            <thead><tr><th>API</th><th>æµ‹è¯•åœºæ™¯</th><th>çŠ¶æ€</th></tr></thead>
            <tbody>
              <tr><td><span class="api-method get">GET</span>/api/im/users/profile</td><td>è·å–ä¸ªäººèµ„æ–™</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method put">PUT</span>/api/im/users/profile</td><td>æ›´æ–°ä¸ªäººèµ„æ–™</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method post">POST</span>/api/im/users/verify-pin</td><td>éªŒè¯äºŒçº§å¯†ç ï¼ˆæ­£ç¡®/é”™è¯¯ï¼‰</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method get">GET</span>/api/im/users/search</td><td>æœç´¢ç”¨æˆ·</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method get">GET</span>/api/im/users/:userId</td><td>è·å–ç”¨æˆ·å…¬å¼€ä¿¡æ¯</td><td><span class="status pass">é€šè¿‡</span></td></tr>
            </tbody>
          </table>
        </div>
        <div class="subsection">
          <h3>è®¾å¤‡ç®¡ç† (6ä¸ª)</h3>
          <table>
            <thead><tr><th>API</th><th>æµ‹è¯•åœºæ™¯</th><th>çŠ¶æ€</th></tr></thead>
            <tbody>
              <tr><td><span class="api-method post">POST</span>/api/im/devices/register</td><td>æ³¨å†Œè®¾å¤‡</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method get">GET</span>/api/im/devices</td><td>è·å–è®¾å¤‡åˆ—è¡¨</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method post">POST</span>/api/im/devices/:id/heartbeat</td><td>è®¾å¤‡å¿ƒè·³</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method put">PUT</span>/api/im/devices/:id</td><td>æ›´æ–°è®¾å¤‡ä¿¡æ¯</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method post">POST</span>/api/im/devices/:id/offline</td><td>è®¾å¤‡ä¸‹çº¿</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method delete">DELETE</span>/api/im/devices/:id</td><td>åˆ é™¤è®¾å¤‡</td><td><span class="status pass">é€šè¿‡</span></td></tr>
            </tbody>
          </table>
        </div>
        <div class="subsection">
          <h3>å¥½å‹ç®¡ç† (14ä¸ª)</h3>
          <table>
            <thead><tr><th>API</th><th>æµ‹è¯•åœºæ™¯</th><th>çŠ¶æ€</th></tr></thead>
            <tbody>
              <tr><td><span class="api-method post">POST</span>/api/im/friends/requests</td><td>å‘é€å¥½å‹ç”³è¯·</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method post">POST</span>/api/im/friends/requests</td><td>ä¸èƒ½é‡å¤å‘é€ç”³è¯·</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method get">GET</span>/api/im/friends/requests/received</td><td>è·å–æ”¶åˆ°çš„å¥½å‹ç”³è¯·</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method get">GET</span>/api/im/friends/requests/sent</td><td>è·å–å‘å‡ºçš„å¥½å‹ç”³è¯·</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method post">POST</span>/api/im/friends/requests/:id/accept</td><td>æ¥å—å¥½å‹ç”³è¯·</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method post">POST</span>/api/im/friends/requests/:id/reject</td><td>æ‹’ç»å¥½å‹ç”³è¯·</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method get">GET</span>/api/im/friends</td><td>è·å–å¥½å‹åˆ—è¡¨</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method get">GET</span>/api/im/friends/:userId</td><td>è·å–å¥½å‹è¯¦æƒ…</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method put">PUT</span>/api/im/friends/:userId</td><td>æ›´æ–°å¥½å‹è®¾ç½®ï¼ˆå¤‡æ³¨/æ‹‰é»‘/ç½®é¡¶ï¼‰</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method delete">DELETE</span>/api/im/friends/:userId</td><td>åˆ é™¤å¥½å‹</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method get">GET</span>/api/im/friends/check/:userId</td><td>æ£€æŸ¥æ˜¯å¦ä¸ºå¥½å‹</td><td><span class="status pass">é€šè¿‡</span></td></tr>
            </tbody>
          </table>
        </div>
        <div class="subsection">
          <h3>ç¾¤ç»„ç®¡ç† (14ä¸ª)</h3>
          <table>
            <thead><tr><th>API</th><th>æµ‹è¯•åœºæ™¯</th><th>çŠ¶æ€</th></tr></thead>
            <tbody>
              <tr><td><span class="api-method post">POST</span>/api/im/groups</td><td>åˆ›å»ºç¾¤ç»„</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method get">GET</span>/api/im/groups</td><td>è·å–æˆ‘çš„ç¾¤ç»„åˆ—è¡¨</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method get">GET</span>/api/im/groups/:groupId</td><td>è·å–ç¾¤ç»„è¯¦æƒ…</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method put">PUT</span>/api/im/groups/:groupId</td><td>æ›´æ–°ç¾¤ç»„ä¿¡æ¯</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method get">GET</span>/api/im/groups/:groupId/members</td><td>è·å–ç¾¤æˆå‘˜åˆ—è¡¨</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method post">POST</span>/api/im/groups/:groupId/invite</td><td>é‚€è¯·æˆå‘˜åŠ å…¥ç¾¤ç»„</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method post">POST</span>/api/im/groups/:groupId/admin/:userId</td><td>è®¾ç½®/å–æ¶ˆç®¡ç†å‘˜</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method post">POST</span>/api/im/groups/:groupId/mute/:userId</td><td>ç¦è¨€/è§£é™¤ç¦è¨€æˆå‘˜</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method post">POST</span>/api/im/groups/:groupId/kick/:userId</td><td>è¸¢å‡ºæˆå‘˜</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method post">POST</span>/api/im/groups/:groupId/transfer</td><td>è½¬è®©ç¾¤ä¸»</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method post">POST</span>/api/im/groups/:groupId/leave</td><td>é€€å‡ºç¾¤ç»„</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method delete">DELETE</span>/api/im/groups/:groupId</td><td>è§£æ•£ç¾¤ç»„</td><td><span class="status pass">é€šè¿‡</span></td></tr>
            </tbody>
          </table>
        </div>
        <div class="subsection">
          <h3>ä¼šè¯ç®¡ç† (5ä¸ª)</h3>
          <table>
            <thead><tr><th>API</th><th>æµ‹è¯•åœºæ™¯</th><th>çŠ¶æ€</th></tr></thead>
            <tbody>
              <tr><td><span class="api-method post">POST</span>/api/im/conversations/private</td><td>å‘èµ·ç§èŠä¼šè¯</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method get">GET</span>/api/im/conversations</td><td>è·å–ä¼šè¯åˆ—è¡¨</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method get">GET</span>/api/im/conversations/:id</td><td>è·å–ä¼šè¯è¯¦æƒ…</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method post">POST</span>/api/im/conversations/:id/clear-unread</td><td>æ¸…ç©ºæœªè¯»</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method delete">DELETE</span>/api/im/conversations/:id</td><td>åˆ é™¤ä¼šè¯</td><td><span class="status pass">é€šè¿‡</span></td></tr>
            </tbody>
          </table>
        </div>
        <div class="subsection">
          <h3>æ¶ˆæ¯ç®¡ç† (14ä¸ª)</h3>
          <table>
            <thead><tr><th>API</th><th>æµ‹è¯•åœºæ™¯</th><th>çŠ¶æ€</th></tr></thead>
            <tbody>
              <tr><td><span class="api-method post">POST</span>/api/im/messages</td><td>å‘é€æ–‡æœ¬/å›¾ç‰‡æ¶ˆæ¯</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method get">GET</span>/api/im/messages/conversation/:id</td><td>è·å–ä¼šè¯æ¶ˆæ¯åˆ—è¡¨</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method get">GET</span>/api/im/messages/:messageId</td><td>è·å–æ¶ˆæ¯è¯¦æƒ…</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method post">POST</span>/api/im/messages/conversation/:id/read</td><td>æ ‡è®°æ¶ˆæ¯å·²è¯»</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method post">POST</span>/api/im/messages/:messageId/recall</td><td>æ’¤å›æ¶ˆæ¯</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method post">POST</span>/api/im/messages/:messageId/delivered</td><td>æ ‡è®°æ¶ˆæ¯å·²é€è¾¾</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method post">POST</span>/api/im/messages/batch-delivered</td><td>æ‰¹é‡æ ‡è®°æ¶ˆæ¯å·²é€è¾¾</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method post">POST</span>/api/im/messages/:messageId/forward</td><td>è½¬å‘æ¶ˆæ¯</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method post">POST</span>/api/im/messages/search</td><td>æœç´¢æ¶ˆæ¯</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method post">POST</span>/api/im/conversations/:id/typing</td><td>å‘é€è¾“å…¥çŠ¶æ€</td><td><span class="status pass">é€šè¿‡</span></td></tr>
            </tbody>
          </table>
        </div>
        <div class="subsection">
          <h3>é€šè¯ç®¡ç† (10ä¸ª)</h3>
          <table>
            <thead><tr><th>API</th><th>æµ‹è¯•åœºæ™¯</th><th>çŠ¶æ€</th></tr></thead>
            <tbody>
              <tr><td><span class="api-method post">POST</span>/api/im/calls/initiate</td><td>å‘èµ·é€šè¯</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method get">GET</span>/api/im/calls</td><td>è·å–é€šè¯è®°å½•åˆ—è¡¨</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method get">GET</span>/api/im/calls/:callId</td><td>è·å–é€šè¯è¯¦æƒ…</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method post">POST</span>/api/im/calls/:callId/ring</td><td>è¢«å«å“é“ƒ</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method post">POST</span>/api/im/calls/:callId/accept</td><td>æ¥å¬é€šè¯</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method post">POST</span>/api/im/calls/:callId/reject</td><td>æ‹’æ¥é€šè¯</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method post">POST</span>/api/im/calls/:callId/hangup</td><td>æŒ‚æ–­é€šè¯</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method post">POST</span>/api/im/calls/:callId/signal</td><td>WebRTC Offer/Answer/ICE ä¿¡ä»¤</td><td><span class="status pass">é€šè¿‡</span></td></tr>
            </tbody>
          </table>
        </div>
        <div class="subsection">
          <h3>åœ¨çº¿çŠ¶æ€ (4ä¸ª)</h3>
          <table>
            <thead><tr><th>API</th><th>æµ‹è¯•åœºæ™¯</th><th>çŠ¶æ€</th></tr></thead>
            <tbody>
              <tr><td><span class="api-method get">GET</span>/api/im/presence/check/:userId</td><td>æ£€æŸ¥ç”¨æˆ·æ˜¯å¦åœ¨çº¿</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method get">GET</span>/api/im/presence/status/:userId</td><td>è·å–ç”¨æˆ·è¯¦ç»†åœ¨çº¿çŠ¶æ€</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method post">POST</span>/api/im/presence/batch</td><td>æ‰¹é‡è·å–ç”¨æˆ·åœ¨çº¿çŠ¶æ€</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="api-method get">GET</span>/api/im/presence/friends</td><td>è·å–å¥½å‹åœ¨çº¿çŠ¶æ€</td><td><span class="status pass">é€šè¿‡</span></td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- WebSocket é€šä¿¡æµ‹è¯• -->
    <div class="section">
      <div class="section-header">ğŸ”Œ WebSocket é€šä¿¡æµ‹è¯• (23ä¸ª)</div>
      <div class="section-content">
        <div class="subsection">
          <h3>è¿æ¥ç”Ÿå‘½å‘¨æœŸ (4ä¸ª)</h3>
          <table>
            <thead><tr><th>æµ‹è¯•åœºæ™¯</th><th>æè¿°</th><th>çŠ¶æ€</th></tr></thead>
            <tbody>
              <tr><td>å»ºç«‹è¿æ¥</td><td>ç”¨æˆ·1/ç”¨æˆ·2 å»ºç«‹ WebSocket è¿æ¥</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td>è®¤è¯å¤±è´¥</td><td>æ— æ•ˆ Token è¿æ¥è¢«æ‹’ç»</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td>å¿ƒè·³æœºåˆ¶</td><td>ping/pong å¿ƒè·³ä¿æ´»</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td>æ–­å¼€è¿æ¥</td><td>æ­£å¸¸æ–­å¼€ WebSocket è¿æ¥</td><td><span class="status pass">é€šè¿‡</span></td></tr>
            </tbody>
          </table>
        </div>
        <div class="subsection">
          <h3>æ¶ˆæ¯å®æ—¶æ¨é€ (4ä¸ª)</h3>
          <table>
            <thead><tr><th>äº‹ä»¶ç±»å‹</th><th>æè¿°</th><th>çŠ¶æ€</th></tr></thead>
            <tbody>
              <tr><td><span class="ws-event">message:new</span></td><td>å‘é€æ¶ˆæ¯åæ¥æ”¶æ–¹æ”¶åˆ°å®æ—¶æ¨é€</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="ws-event">message:recalled</span></td><td>æ’¤å›æ¶ˆæ¯åæ¥æ”¶æ–¹æ”¶åˆ°æ’¤å›æ¨é€</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="ws-event">message:read</span></td><td>å·²è¯»å›æ‰§æ¨é€</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="ws-event">message:delivered</span></td><td>é€è¾¾å›æ‰§æ¨é€</td><td><span class="status pass">é€šè¿‡</span></td></tr>
            </tbody>
          </table>
        </div>
        <div class="subsection">
          <h3>è¾“å…¥çŠ¶æ€æ¨é€ (2ä¸ª)</h3>
          <table>
            <thead><tr><th>äº‹ä»¶ç±»å‹</th><th>æè¿°</th><th>çŠ¶æ€</th></tr></thead>
            <tbody>
              <tr><td><span class="ws-event">typing:start</span></td><td>è¾“å…¥çŠ¶æ€å¼€å§‹æ¨é€</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="ws-event">typing:stop</span></td><td>è¾“å…¥çŠ¶æ€åœæ­¢æ¨é€</td><td><span class="status pass">é€šè¿‡</span></td></tr>
            </tbody>
          </table>
        </div>
        <div class="subsection">
          <h3>é€šè¯ä¿¡ä»¤æ¨é€ (5ä¸ª)</h3>
          <table>
            <thead><tr><th>äº‹ä»¶ç±»å‹</th><th>æè¿°</th><th>çŠ¶æ€</th></tr></thead>
            <tbody>
              <tr><td><span class="ws-event">call:invite</span></td><td>å‘èµ·é€šè¯åè¢«å«æ”¶åˆ°é‚€è¯·æ¨é€</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="ws-event">call:ring</span></td><td>å“é“ƒåä¸»å«æ”¶åˆ°å“é“ƒæ¨é€</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="ws-event">call:answer</span></td><td>æ¥å¬ååŒæ–¹æ”¶åˆ°æ¥å¬æ¨é€</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="ws-event">call:signal</span></td><td>WebRTC ä¿¡ä»¤è½¬å‘ (Offer/Answer/ICE)</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="ws-event">call:end</span></td><td>æŒ‚æ–­ååŒæ–¹æ”¶åˆ°ç»“æŸæ¨é€</td><td><span class="status pass">é€šè¿‡</span></td></tr>
            </tbody>
          </table>
        </div>
        <div class="subsection">
          <h3>ç¾¤ç»„äº‹ä»¶æ¨é€ (4ä¸ª)</h3>
          <table>
            <thead><tr><th>äº‹ä»¶ç±»å‹</th><th>æè¿°</th><th>çŠ¶æ€</th></tr></thead>
            <tbody>
              <tr><td><span class="ws-event">group:invited</span></td><td>åˆ›å»ºç¾¤ç»„å¹¶é‚€è¯·æˆå‘˜åæ”¶åˆ°é‚€è¯·æ¨é€</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="ws-event">group:muted</span></td><td>ç¦è¨€æˆå‘˜åæ”¶åˆ°ç¦è¨€æ¨é€</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="ws-event">group:unmuted</span></td><td>è§£é™¤ç¦è¨€åæ”¶åˆ°è§£ç¦æ¨é€</td><td><span class="status pass">é€šè¿‡</span></td></tr>
              <tr><td><span class="ws-event">group:kicked</span></td><td>è¸¢å‡ºæˆå‘˜åæ”¶åˆ°è¸¢å‡ºæ¨é€</td><td><span class="status pass">é€šè¿‡</span></td></tr>
            </tbody>
          </table>
        </div>
        <div class="subsection">
          <h3>å·²è¦†ç›–çš„ WebSocket äº‹ä»¶ç±»å‹</h3>
          <p style="margin-top: 10px; color: #64748b;">
            <span class="ws-event">message:new</span>
            <span class="ws-event">message:recalled</span>
            <span class="ws-event">message:read</span>
            <span class="ws-event">message:delivered</span>
            <span class="ws-event">typing:start</span>
            <span class="ws-event">typing:stop</span>
            <span class="ws-event">call:invite</span>
            <span class="ws-event">call:ring</span>
            <span class="ws-event">call:answer</span>
            <span class="ws-event">call:signal</span>
            <span class="ws-event">call:end</span>
            <span class="ws-event">group:invited</span>
            <span class="ws-event">group:muted</span>
            <span class="ws-event">group:unmuted</span>
            <span class="ws-event">group:kicked</span>
            <span class="ws-event">presence:online</span>
            <span class="ws-event">presence:offline</span>
            <span class="ws-event">connected</span>
            <span class="ws-event">heartbeat:ack</span>
          </p>
        </div>
      </div>
    </div>

    <!-- ä¸šåŠ¡æµç¨‹æµ‹è¯• -->
    <div class="section">
      <div class="section-header">ğŸ”„ ä¸šåŠ¡æµç¨‹æµ‹è¯•è¦†ç›–</div>
      <div class="section-content">
        <div class="flow-list">
          <div class="flow-item">
            <h4>âœ… ç”¨æˆ·è®¤è¯æµç¨‹</h4>
            <p>æ³¨å†Œ â†’ ç™»å½• â†’ è·å–ç”¨æˆ·ä¿¡æ¯ â†’ é€€å‡ºç™»å½•</p>
          </div>
          <div class="flow-item">
            <h4>âœ… å¥½å‹å…³ç³»æµç¨‹</h4>
            <p>æœç´¢ç”¨æˆ· â†’ å‘é€ç”³è¯· â†’ æ¥å—/æ‹’ç» â†’ å¥½å‹åˆ—è¡¨ â†’ æ›´æ–°å¤‡æ³¨ â†’ åˆ é™¤å¥½å‹</p>
          </div>
          <div class="flow-item">
            <h4>âœ… ç¾¤ç»„ç®¡ç†æµç¨‹</h4>
            <p>åˆ›å»ºç¾¤ç»„ â†’ é‚€è¯·æˆå‘˜ â†’ è®¾ç½®ç®¡ç†å‘˜ â†’ ç¦è¨€/è§£ç¦ â†’ è¸¢å‡º â†’ è½¬è®©ç¾¤ä¸» â†’ è§£æ•£</p>
          </div>
          <div class="flow-item">
            <h4>âœ… æ¶ˆæ¯æ”¶å‘æµç¨‹</h4>
            <p>åˆ›å»ºä¼šè¯ â†’ å‘é€æ¶ˆæ¯ â†’ å®æ—¶æ¨é€ â†’ å·²è¯»/é€è¾¾å›æ‰§ â†’ æ’¤å› â†’ è½¬å‘</p>
          </div>
          <div class="flow-item">
            <h4>âœ… è¯­éŸ³é€šè¯æµç¨‹</h4>
            <p>å‘èµ·é€šè¯ â†’ è¢«å«å“é“ƒ â†’ æ¥å¬/æ‹’æ¥ â†’ WebRTCä¿¡ä»¤äº¤æ¢ â†’ æŒ‚æ–­</p>
          </div>
          <div class="flow-item">
            <h4>âœ… è®¾å¤‡ç®¡ç†æµç¨‹</h4>
            <p>æ³¨å†Œè®¾å¤‡ â†’ è®¾å¤‡å¿ƒè·³ â†’ æ›´æ–°æ¨é€ä»¤ç‰Œ â†’ è®¾å¤‡ä¸‹çº¿ â†’ åˆ é™¤è®¾å¤‡</p>
          </div>
        </div>
      </div>
    </div>

    <!-- API è¦†ç›–ç»Ÿè®¡ -->
    <div class="section">
      <div class="section-header">ğŸ“ˆ API è¦†ç›–ç»Ÿè®¡</div>
      <div class="section-content">
        <table>
          <thead>
            <tr><th>æ¨¡å—</th><th>API æ•°é‡</th><th>æµ‹è¯•é€šè¿‡</th><th>è¦†ç›–ç‡</th></tr>
          </thead>
          <tbody>
            <tr><td>è®¤è¯æ¨¡å—</td><td>4</td><td>4 âœ…</td><td>100%</td></tr>
            <tr><td>ç”¨æˆ·æ¨¡å—</td><td>6</td><td>6 âœ…</td><td>100%</td></tr>
            <tr><td>è®¾å¤‡æ¨¡å—</td><td>6</td><td>6 âœ…</td><td>100%</td></tr>
            <tr><td>å¥½å‹æ¨¡å—</td><td>12</td><td>12 âœ…</td><td>100%</td></tr>
            <tr><td>ç¾¤ç»„æ¨¡å—</td><td>14</td><td>14 âœ…</td><td>100%</td></tr>
            <tr><td>ä¼šè¯æ¨¡å—</td><td>5</td><td>5 âœ…</td><td>100%</td></tr>
            <tr><td>æ¶ˆæ¯æ¨¡å—</td><td>10</td><td>10 âœ…</td><td>100%</td></tr>
            <tr><td>é€šè¯æ¨¡å—</td><td>7</td><td>7 âœ…</td><td>100%</td></tr>
            <tr><td>åœ¨çº¿çŠ¶æ€</td><td>4</td><td>4 âœ…</td><td>100%</td></tr>
            <tr><td>åª’ä½“æ–‡ä»¶</td><td>1</td><td>1 âœ…</td><td>100%</td></tr>
            <tr style="background: #f0fdf4; font-weight: bold;">
              <td>åˆè®¡</td><td>69</td><td>69 âœ…</td><td>100%</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- ç»“è®º -->
    <div class="section">
      <div class="section-header">ğŸ“‹ æµ‹è¯•ç»“è®º</div>
      <div class="section-content">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
          <div style="background: #f0fdf4; padding: 20px; border-radius: 10px; border-left: 4px solid #22c55e;">
            <h4 style="color: #166534; margin-bottom: 10px;">âœ… æµ‹è¯•ç»“æœ</h4>
            <p style="color: #15803d; font-size: 1.5em; font-weight: bold;">å…¨éƒ¨é€šè¿‡ (143/143)</p>
          </div>
          <div style="background: #eff6ff; padding: 20px; border-radius: 10px; border-left: 4px solid #3b82f6;">
            <h4 style="color: #1e40af; margin-bottom: 10px;">ğŸ“Š è¦†ç›–èŒƒå›´</h4>
            <ul style="color: #1d4ed8; margin-left: 20px;">
              <li>69 ä¸ª REST API æ¥å£</li>
              <li>19 ä¸ª WebSocket äº‹ä»¶ç±»å‹</li>
              <li>6 ä¸ªæ ¸å¿ƒä¸šåŠ¡æµç¨‹</li>
            </ul>
          </div>
          <div style="background: #fefce8; padding: 20px; border-radius: 10px; border-left: 4px solid #eab308;">
            <h4 style="color: #854d0e; margin-bottom: 10px;">ğŸš€ ç³»ç»ŸçŠ¶æ€</h4>
            <p style="color: #a16207; font-weight: 500;">æ‰€æœ‰åŠŸèƒ½æ­£å¸¸è¿è¡Œ<br>å¯ç”¨äºç”Ÿäº§éƒ¨ç½²</p>
          </div>
        </div>
      </div>
    </div>

    <div class="footer">
      <p>IM ç³»ç»Ÿæµ‹è¯•æŠ¥å‘Š | ç”Ÿæˆæ—¶é—´ï¼š2026-01-26 05:39:50 UTC+8</p>
    </div>
  </div>
</body>
</html>
