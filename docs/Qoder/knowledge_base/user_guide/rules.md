# 规则

Qoder 支持为每个项目配置专属规则。规则存放于 `.qoder/rules` 目录中，仅对当前项目生效。它们可优化模型对你的编码偏好的适配，包括项目所用框架与代码风格。

## 规则如何工作

大型语言模型（LLMs）依赖通用知识，因此缺乏你项目特定的上下文和规则。Qoder 的规则通过将预定义的上下文有策略地注入到提示中来弥补这一不足，从而引导 AI 的回答更一致地符合你项目的标准和要求。

## 存储与共享

规则文件直接存放在项目目录中，并通过 Git 等版本控制系统与团队成员共享，与代码库一同管理。

对于仅本地使用（不共享）的规则，请将 `.qoder/rules` 目录添加到项目的 `.gitignore` 文件中。

## 限制

*   所有活跃规则文件**合计最多允许 100,000 个字符**（超出部分将被截断）。
*   仅支持自然语言，不支持图片或链接。

## 规则类型

| 类型 | 描述 | 使用场景 |
| :--- | :--- | :--- |
| **手动引入** | 通过智能会话面板或行间会话使用 `@rule` 手动应用。 | 按需工作流，自定义提示词 |
| **模型决策** | 模型在智能体模式下评估规则描述并决定何时应用。 | 场景化任务（例如生成单元测试或代码注释） |
| **始终生效** | 适用于所有智能会话和行间会话请求。 | 强制执行项目级标准（例如编码风格或文档格式） |
| **指定文件生效** | 适用于匹配通配符模式的所有文件（例如 `.js` 或 `src/**/*.ts`）。 | 语言或目录特定的规则 |

## AGENTS.md 兼容性

Qoder 规则现已兼容 AGENTS.md 文件。要启用此功能：

1.  只需将 `AGENTS.md` 文件复制到项目目录中。
2.  Agent 将自动识别并利用文件中定义的规则。
3.  无需额外配置 - 集成是无缝的。

如果 `AGENTS.md` 内容与规则内容存在冲突，则规则内容优先。

## 最佳实践

*   **保持简洁**：让规则聚焦且明确无歧义。
*   **结构清晰**：使用项目符号、编号列表或 Markdown 格式以提升可读性。
*   **包含示例**：提供“良好”的代码示例以指导模型。
*   **迭代与优化**：根据模型输出和反馈不断完善规则。

## 配置规则

1.  在 Qoder IDE 右上角，点击用户图标或使用键盘快捷键（`⌘ ⇧ ,`（macOS）或 `Ctrl Shift ,`（Windows）），然后选择 **Qoder 设置**。
2.  在左侧导航窗格中，点击 **规则**。
3.  点击 **添加**。
4.  在顶部搜索栏中，输入唯一的规则名称并按 **确认**。
5.  选择规则类型：
    *   **手动引入**
    *   **模型决策**：输入场景描述。示例：“生成一个单元测试.”
    *   **指定文件生效**：提供以逗号分隔的文件路径通配符。示例：`*.md`、`src/*.java`。
    *   **始终生效**
6.  关闭窗口以保存更改。

## 后续步骤

要编辑或删除现有规则，请在 **规则** 页面点击相应图标。
