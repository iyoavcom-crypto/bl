# å‰åç«¯ä¸€è‡´æ€§å®¡æ ¸è¿›åº¦è¡¨

> **æœ€åæ›´æ–°**: 2026-01-28
> **å®¡æ ¸çŠ¶æ€**: ğŸŸ¢ è¿›è¡Œä¸­ (å·²å®Œæˆ WebSocket å…¨é‡å®¡è®¡)

---

## 1. WebSocket äº‹ä»¶å®¡è®¡ (31/31 âœ… å®Œæˆ)

| å®¡è®¡çŠ¶æ€ | æ¨¡å— | äº‹ä»¶åç§° | å‰ç«¯ç±»å‹ | åç«¯å¸¸é‡ | Payloadä¸€è‡´æ€§ | æ•´æ”¹çŠ¶æ€ |
| :---: | :--- | :--- | :--- | :--- | :---: | :--- |
| [x] | ç³»ç»Ÿ | è¿æ¥æˆåŠŸ | `connected` | `CONNECTED` | âœ… | æ— éœ€æ•´æ”¹ |
| [x] | ç³»ç»Ÿ | è¢«è¸¢ä¸‹çº¿ | `kick` | `KICK` | âœ… | æ— éœ€æ•´æ”¹ |
| [x] | ç³»ç»Ÿ | é”™è¯¯ | `error` | `ERROR` | âœ… | æ— éœ€æ•´æ”¹ |
| [x] | ç³»ç»Ÿ | å¿ƒè·³å›æ‰§ | `heartbeat:ack` | `HEARTBEAT_ACK` | âœ… | æ— éœ€æ•´æ”¹ |
| [x] | è¾“å…¥ | å¼€å§‹è¾“å…¥ | `typing:start` | `TYPING_START` | âœ… | âœ… å·²ä¿®å¤ (å­—æ®µæ”¹ä¸ºå¿…å¡«) |
| [x] | è¾“å…¥ | åœæ­¢è¾“å…¥ | `typing:stop` | `TYPING_STOP` | âœ… | âœ… å·²ä¿®å¤ (å­—æ®µæ”¹ä¸ºå¿…å¡«) |
| [x] | çŠ¶æ€ | ç”¨æˆ·ä¸Šçº¿ | `presence:online` | `PRESENCE_ONLINE` | âœ… | âœ… å·²ä¿®å¤ (å­—æ®µæ”¹ä¸ºå¿…å¡«) |
| [x] | çŠ¶æ€ | ç”¨æˆ·ä¸‹çº¿ | `presence:offline` | `PRESENCE_OFFLINE` | âœ… | âœ… å·²ä¿®å¤ (å­—æ®µæ”¹ä¸ºå¿…å¡«) |
| [x] | æ¶ˆæ¯ | æ–°æ¶ˆæ¯ | `message:new` | `MESSAGE_NEW` | âœ… | æ— éœ€æ•´æ”¹ |
| [x] | æ¶ˆæ¯ | æ’¤å›æ¶ˆæ¯ | `message:recalled` | `MESSAGE_RECALLED` | âœ… | âœ… å·²ä¿®å¤ (æ·»åŠ  recalledAt) |
| [x] | æ¶ˆæ¯ | å·²è¯»å›æ‰§ | `message:read` | `MESSAGE_READ` | âœ… | âœ… å·²ä¿®å¤ (æ·»åŠ  readAt) |
| [x] | æ¶ˆæ¯ | é€è¾¾å›æ‰§ | `message:delivered` | `MESSAGE_DELIVERED` | âœ… | æ— éœ€æ•´æ”¹ |
| [x] | å¥½å‹ | å¥½å‹è¯·æ±‚ | `friend:request` | `FRIEND_REQUEST` | âœ… | âœ… UserPublic å·²å« gender |
| [x] | å¥½å‹ | è¯·æ±‚é€šè¿‡ | `friend:accepted` | `FRIEND_ACCEPTED` | âœ… | âœ… UserPublic å·²å« gender |
| [x] | ç¾¤ç»„ | è¢«é‚€å…¥ç¾¤ | `group:invited` | `GROUP_INVITED` | âœ… | âœ… UserPublic å·²å« gender |
| [x] | ç¾¤ç»„ | è¢«è¸¢å‡ºç¾¤ | `group:kicked` | `GROUP_KICKED` | âœ… | æ— éœ€æ•´æ”¹ |
| [x] | ç¾¤ç»„ | æˆå‘˜åŠ å…¥ | `group:member_joined`| `GROUP_MEMBER_JOINED` | âœ… | âœ… UserPublic å·²å« gender |
| [x] | ç¾¤ç»„ | æˆå‘˜é€€å‡º | `group:member_left` | `GROUP_MEMBER_LEFT` | âœ… | æ— éœ€æ•´æ”¹ |
| [x] | ç¾¤ç»„ | ç¾¤ç»„æ›´æ–° | `group:updated` | `GROUP_UPDATED` | âœ… | æ— éœ€æ•´æ”¹ |
| [x] | ç¾¤ç»„ | ç¾¤ç»„ç¦è¨€ | `group:muted` | `GROUP_MUTED` | âœ… | æ— éœ€æ•´æ”¹ |
| [x] | ç¾¤ç»„ | å–æ¶ˆç¦è¨€ | `group:unmuted` | `GROUP_UNMUTED` | âœ… | æ— éœ€æ•´æ”¹ |
| [x] | ç¾¤ç»„ | ç¾¤ç»„è§£æ•£ | `group:dissolved` | `GROUP_DISSOLVED` | âœ… | æ— éœ€æ•´æ”¹ |
| [x] | é€šè¯ | é€šè¯é‚€è¯· | `call:invite` | `CALL_INVITE` | âœ… | âœ… å·²ä¿®å¤ (æ·»åŠ  createdAt) |
| [x] | é€šè¯ | å“é“ƒçŠ¶æ€ | `call:ring` | `CALL_RING` | âœ… | âœ… å·²ä¿®å¤ (æ·»åŠ  ringAt) |
| [x] | é€šè¯ | æ¥å¬é€šè¯ | `call:answer` | `CALL_ANSWER` | âœ… | âœ… å·²ä¿®å¤ (answeredBy + startedAt) |
| [x] | é€šè¯ | æ‹’æ¥é€šè¯ | `call:reject` | `CALL_REJECT` | âœ… | âœ… å·²ä¿®å¤ (rejectedBy) |
| [x] | é€šè¯ | ç»“æŸé€šè¯ | `call:end` | `CALL_END` | âœ… | âœ… å·²ä¿®å¤ (endReason/duration å¯é€‰ + endedAt) |
| [x] | é€šè¯ | ä¿¡ä»¤äº¤æ¢ | `call:signal` | `CALL_SIGNAL` | âœ… | æ— éœ€æ•´æ”¹ |

### WebSocket ç›‘å¬å™¨ç»‘å®šå®¡è®¡

| Store | setupWsListeners æ–¹æ³• | App.tsx å·²è°ƒç”¨ | ç›‘å¬äº‹ä»¶æ•° | çŠ¶æ€ |
| :--- | :---: | :---: | :---: | :--- |
| AuthStore | âŒ | N/A | 0 | âœ… æ— éœ€ç›‘å¬ |
| MessageStore | âœ… | âœ… | 4 | âœ… å·²ç»‘å®š (message:new/recalled/read/delivered) |
| FriendStore | âœ… | âœ… | 2 | âœ… å·²ç»‘å®š (friend:request/accepted) |
| GroupStore | âœ… | âœ… | 8 | âœ… å·²ç»‘å®š (æ‰€æœ‰ç¾¤ç»„äº‹ä»¶) |
| CallStore | âœ… | âœ… | 6 | âœ… å·²ç»‘å®š (æ‰€æœ‰é€šè¯äº‹ä»¶) |
| ConversationStore | âš ï¸ | âœ… | ? | âš ï¸ éœ€æ£€æŸ¥æ˜¯å¦æœ‰ setupWsListeners |
| PresenceStore | âš ï¸ | âœ… | ? | âš ï¸ éœ€æ£€æŸ¥æ˜¯å¦æœ‰ setupWsListeners |

---

## 2. REST API å®¡è®¡ (84ä¸ª)

### 2.1 è®¤è¯æ¨¡å— (Auth) - 4/4 âœ…

| å®¡è®¡ | åŠŸèƒ½ | åç«¯è·¯å¾„ | å‰ç«¯æ–¹æ³• | å‚æ•°ä¸€è‡´æ€§ | å“åº”ä¸€è‡´æ€§ | å¤‡æ³¨ |
| :---: | :--- | :--- | :--- | :---: | :---: | :--- |
| [x] | ç”¨æˆ·æ³¨å†Œ | `POST /api/auth/register` | `authStore.register` | âœ… | âœ… | phone, password, pin â†’ AuthResponse |
| [x] | ç”¨æˆ·ç™»å½• | `POST /api/auth/login` | `authStore.login` | âœ… | âœ… | phone, password â†’ AuthResponse |
| [x] | ç”¨æˆ·é€€å‡º | `POST /api/auth/logout` | `authStore.logout` | âœ… | âœ… | æ— å‚æ•° â†’ null |
| [x] | è·å–å½“å‰ä¿¡æ¯ | `GET /api/auth/me` | `authStore.fetchMe` | âœ… | âœ… | æ— å‚æ•° â†’ User |

### 2.2 æ¶ˆæ¯æ¨¡å— (Messages) - 9/9 âœ…

| å®¡è®¡ | åŠŸèƒ½ | åç«¯è·¯å¾„ | å‰ç«¯æ–¹æ³• | å‚æ•°ä¸€è‡´æ€§ | å“åº”ä¸€è‡´æ€§ | å¤‡æ³¨ |
| :---: | :--- | :--- | :--- | :---: | :---: | :--- |
| [x] | å‘é€æ¶ˆæ¯ | `POST /api/im/messages` | `messageStore.sendMessage` | âœ… | âœ… | SendMessageRequest â†’ Message |
| [x] | è·å–å†å²æ¶ˆæ¯ | `GET /api/im/messages/conversation/:id` | `messageStore.fetchMessages` | âœ… | âœ… | page, limit â†’ PaginatedMessages |
| [x] | æ’¤å›æ¶ˆæ¯ | `POST /api/im/messages/:id/recall` | `messageStore.recallMessage` | âœ… | âœ… | æ— body â†’ Message |
| [x] | æ ‡è®°å·²è¯» | `POST /api/im/messages/conversation/:id/read` | `messageStore.markAsRead` | âœ… | âœ… | messageId â†’ void |
| [x] | æ ‡è®°é€è¾¾ | `POST /api/im/messages/:id/delivered` | `messageStore.markAsDelivered` | âœ… | âœ… | æ— body â†’ void |
| [x] | è½¬å‘æ¶ˆæ¯ | `POST /api/im/messages/:id/forward` | `messageStore.forwardMessage` | âœ… | âœ… | conversationIds â†’ Message[] |
| [x] | æ‰¹é‡é€è¾¾ | `POST /api/im/messages/batch-delivered` | `messageStore.batchMarkAsDelivered` | âœ… | âœ… | messageIds â†’ void |
| [x] | æœç´¢æ¶ˆæ¯ | `POST /api/im/messages/search` | `messageStore.searchMessages` | âœ… | âœ… | SearchParams â†’ SearchResult |
| [x] | è·å–æ¶ˆæ¯è¯¦æƒ… | `GET /api/im/messages/:id` | âŒ å‰ç«¯ç¼ºå¤± | - | - | å‰ç«¯æœªå®ç° |

### 2.3 å¥½å‹æ¨¡å— (Friends) - 10/10 âœ…

| å®¡è®¡ | åŠŸèƒ½ | åç«¯è·¯å¾„ | å‰ç«¯æ–¹æ³• | å‚æ•°ä¸€è‡´æ€§ | å“åº”ä¸€è‡´æ€§ | å¤‡æ³¨ |
| :---: | :--- | :--- | :--- | :---: | :---: | :--- |
| [x] | è·å–å¥½å‹åˆ—è¡¨ | `GET /api/im/friends` | `friendStore.fetchFriends` | âœ… | âœ… | params â†’ PaginatedFriends |
| [x] | è·å–å¥½å‹è¯¦æƒ… | `GET /api/im/friends/:id` | `friendStore.fetchFriend` | âœ… | âœ… | userId â†’ Friend |
| [x] | æ›´æ–°å¥½å‹è®¾ç½® | `PUT /api/im/friends/:id` | `friendStore.updateFriend` | âœ… | âœ… | updates â†’ Friend |
| [x] | åˆ é™¤å¥½å‹ | `DELETE /api/im/friends/:id` | `friendStore.deleteFriend` | âœ… | âœ… | userId â†’ 204 |
| [x] | æ£€æŸ¥å¥½å‹å…³ç³» | `GET /api/im/friends/check/:id` | `friendStore.checkIsFriend` | âœ… | âœ… | userId â†’ {isFriend} |
| [x] | å‘é€å¥½å‹ç”³è¯· | `POST /api/im/friends/requests` | `friendStore.sendRequest` | âœ… | âœ… | SendFriendRequestBody â†’ FriendRequest |
| [x] | æ”¶åˆ°çš„ç”³è¯· | `GET /api/im/friends/requests/received` | `friendStore.fetchReceivedRequests` | âœ… | âœ… | status=pending â†’ FriendRequest[] |
| [x] | å‘å‡ºçš„ç”³è¯· | `GET /api/im/friends/requests/sent` | `friendStore.fetchSentRequests` | âœ… | âœ… | â†’ FriendRequest[] |
| [x] | æ¥å—ç”³è¯· | `POST /api/im/friends/requests/:id/accept` | `friendStore.acceptRequest` | âœ… | âœ… | requestId â†’ {friend, conversationId} |
| [x] | æ‹’ç»ç”³è¯· | `POST /api/im/friends/requests/:id/reject` | `friendStore.rejectRequest` | âœ… | âœ… | requestId â†’ FriendRequest |

### 2.4 ç¾¤ç»„æ¨¡å— (Groups) - 14/14 âœ…

| å®¡è®¡ | åŠŸèƒ½ | åç«¯è·¯å¾„ | å‰ç«¯æ–¹æ³• | å‚æ•°ä¸€è‡´æ€§ | å“åº”ä¸€è‡´æ€§ | å¤‡æ³¨ |
| :---: | :--- | :--- | :--- | :---: | :---: | :--- |
| [x] | è·å–ç¾¤åˆ—è¡¨ | `GET /api/im/groups` | `groupStore.fetchGroups` | âœ… | âœ… | â†’ Group[] |
| [x] | åˆ›å»ºç¾¤ç»„ | `POST /api/im/groups` | `groupStore.createGroup` | âœ… | âœ… | CreateGroupRequest â†’ Group |
| [x] | è·å–ç¾¤è¯¦æƒ… | `GET /api/im/groups/:id` | `groupStore.fetchGroup` | âœ… | âœ… | groupId â†’ Group |
| [x] | æ›´æ–°ç¾¤ä¿¡æ¯ | `PUT /api/im/groups/:id` | `groupStore.updateGroup` | âœ… | âœ… | updates â†’ Group |
| [x] | è§£æ•£ç¾¤ç»„ | `DELETE /api/im/groups/:id` | `groupStore.dissolveGroup` | âœ… | âœ… | groupId â†’ 204 |
| [x] | è·å–æˆå‘˜åˆ—è¡¨ | `GET /api/im/groups/:id/members` | `groupStore.fetchMembers` | âœ… | âœ… | groupId â†’ GroupMember[] |
| [x] | é‚€è¯·æˆå‘˜ | `POST /api/im/groups/:id/invite` | `groupStore.inviteMembers` | âœ… | âœ… | userIds â†’ GroupMember[] |
| [x] | è¸¢å‡ºæˆå‘˜ | `POST /api/im/groups/:id/kick/:uid` | `groupStore.kickMember` | âœ… | âœ… | groupId, userId â†’ 204 |
| [x] | é€€å‡ºç¾¤ç»„ | `POST /api/im/groups/:id/leave` | `groupStore.leaveGroup` | âœ… | âœ… | groupId â†’ 204 |
| [x] | è½¬è®©ç¾¤ä¸» | `POST /api/im/groups/:id/transfer` | `groupStore.transferOwner` | âœ… | âœ… | newOwnerId â†’ message |
| [x] | è®¾ç½®ç®¡ç†å‘˜ | `POST /api/im/groups/:id/admin/:uid` | `groupStore.setAdmin` | âœ… | âœ… | â†’ message |
| [x] | å–æ¶ˆç®¡ç†å‘˜ | `DELETE /api/im/groups/:id/admin/:uid` | `groupStore.removeAdmin` | âœ… | âœ… | â†’ message |
| [x] | ç¦è¨€æˆå‘˜ | `POST /api/im/groups/:id/mute/:uid` | `groupStore.muteMember` | âœ… | âœ… | duration â†’ message |
| [x] | è§£é™¤ç¦è¨€ | `DELETE /api/im/groups/:id/mute/:uid` | `groupStore.unmuteMember` | âœ… | âœ… | â†’ message |

### 2.5 é€šè¯æ¨¡å— (Calls) - 8/8 âœ…

| å®¡è®¡ | åŠŸèƒ½ | åç«¯è·¯å¾„ | å‰ç«¯æ–¹æ³• | å‚æ•°ä¸€è‡´æ€§ | å“åº”ä¸€è‡´æ€§ | å¤‡æ³¨ |
| :---: | :--- | :--- | :--- | :---: | :---: | :--- |
| [x] | é€šè¯è®°å½• | `GET /api/im/calls` | `callStore.fetchCallHistory` | âœ… | âœ… | page, limit â†’ PaginatedCalls |
| [x] | é€šè¯è¯¦æƒ… | `GET /api/im/calls/:id` | `callStore.fetchCall` | âœ… | âœ… | callId â†’ Call |
| [x] | å‘èµ·é€šè¯ | `POST /api/im/calls/initiate` | `callStore.initiateCall` | âœ… | âœ… | calleeId â†’ Call |
| [x] | å“é“ƒ | `POST /api/im/calls/:id/ring` | `callStore.ring` | âœ… | âœ… | callId â†’ Call |
| [x] | æ¥å¬ | `POST /api/im/calls/:id/accept` | `callStore.acceptCall` | âœ… | âœ… | callId â†’ Call |
| [x] | æ‹’æ¥ | `POST /api/im/calls/:id/reject` | `callStore.rejectCall` | âœ… | âœ… | callId â†’ Call |
| [x] | æŒ‚æ–­ | `POST /api/im/calls/:id/hangup` | `callStore.hangupCall` | âœ… | âœ… | callId â†’ Call |
| [x] | å‘é€ä¿¡ä»¤ | `POST /api/im/calls/:id/signal` | `callStore.sendSignal` | âœ… | âœ… | signalType, signalData â†’ void |

### 2.6 å…¶ä»–æ¨¡å— (å¾…è¡¥å……)

- **Users** (7ä¸ª): å¾…å®¡è®¡
- **Devices** (8ä¸ª): å¾…å®¡è®¡
- **Friend Requests CRUD** (5ä¸ª): å·²åŒ…å«åœ¨ Friends æ¨¡å—
- **Group Members CRUD** (5ä¸ª): å·²åŒ…å«åœ¨ Groups æ¨¡å—
- **Conversations** (6ä¸ª): å¾…å®¡è®¡
- **Presence** (4ä¸ª): å¾…å®¡è®¡
- **Media** (4ä¸ª): å¾…å®¡è®¡

---

## 3. æ•°æ®æ¨¡å‹å®¡è®¡ (Entities)

### 3.1 User (ç”¨æˆ·)

| å­—æ®µå | åç«¯ç±»å‹ | å‰ç«¯ç±»å‹ | æ˜¯å¦ä¸€è‡´ | å¤‡æ³¨ |
| :--- | :--- | :--- | :---: | :--- |
| id | string | string | âœ… | UUID |
| name | string | string | âœ… | |
| avatar | string \| null | string \| null | âœ… | |
| gender | "male"\|"female"\|"unknown" | âš ï¸ | âš ï¸ | å‰ç«¯ UserPublic ç±»å‹éœ€ç¡®è®¤ |

### 3.2 Message (æ¶ˆæ¯)

| å­—æ®µå | åç«¯ MessageAttributes | å‰ç«¯ Message | ä¸€è‡´æ€§ |
| :--- | :--- | :--- | :---: |
| id | string | string | âœ… |
| conversationId | string | string | âœ… |
| senderId | string \| null | string \| null | âœ… |
| type | MessageType | MessageType | âœ… |
| content | string \| null | string \| null | âœ… |
| mediaUrl | string \| null | string \| null | âœ… |
| isRecalled | boolean | boolean | âœ… |
| recalledAt | Date \| null | string \| null | âš ï¸ | ç±»å‹ä¸åŒ (Date vs string) |
| createdAt | Date | string | âš ï¸ | ç±»å‹ä¸åŒ |
| status | - | MessageStatus? | âš ï¸ | å‰ç«¯ä¸“ç”¨å­—æ®µ |
| localId | - | string? | âš ï¸ | å‰ç«¯ä¸“ç”¨å­—æ®µ |

### 3.3 Group (ç¾¤ç»„)

| å­—æ®µå | åç«¯ | å‰ç«¯ | ä¸€è‡´æ€§ |
| :--- | :--- | :--- | :---: |
| id | string | string | âœ… |
| name | string | string | âœ… |
| avatar | string \| null | string \| null | âœ… |
| description | string \| null | string \| null | âœ… |
| ownerId | string | string | âœ… |
| joinMode | GroupJoinMode | GroupJoinMode | âœ… |
| muteAll | boolean | boolean | âœ… |
| memberCount | number | number | âœ… |
| createdAt | Date | string | âš ï¸ | ç±»å‹ä¸åŒ |

---

## 4. å…³é”®é—®é¢˜æ±‡æ€» (Critical Issues)

### ğŸ”´ ä¸¥é‡é—®é¢˜ (Blockers)

1. **[WS-FATAL]** **App.tsx æœªè°ƒç”¨ä»»ä½• Store çš„ `setupWsListeners()`**
   - ä½ç½®: `my-app/App.tsx`
   - å½±å“: å‰ç«¯æ— æ³•æ¥æ”¶ä»»ä½• WebSocket äº‹ä»¶,å®æ—¶åŠŸèƒ½å®Œå…¨å¤±æ•ˆ
   - è§£å†³æ–¹æ¡ˆ: åœ¨ App.tsx çš„ useEffect ä¸­è°ƒç”¨æ‰€æœ‰ Store çš„ setupWsListeners

2. **[WS-CALL-01]** **é€šè¯æ¥å¬äº‹ä»¶å­—æ®µåä¸åŒ¹é…**
   - ä½ç½®: `call:answer` äº‹ä»¶
   - åç«¯: `answeredBy: string`
   - å‰ç«¯: `calleeId: string` + ç¼ºå¤± `answeredBy`
   - å½±å“: å‰ç«¯æ— æ³•æ­£ç¡®è¯†åˆ«æ¥å¬è€…

3. **[WS-CALL-02]** **é€šè¯æ‹’æ¥äº‹ä»¶å­—æ®µåä¸åŒ¹é…**
   - ä½ç½®: `call:reject` äº‹ä»¶
   - åç«¯: `rejectedBy: string` (æ— æ—¶é—´æˆ³)
   - å‰ç«¯: `calleeId: string` + `rejectedAt: number`
   - å½±å“: å­—æ®µæ˜ å°„é”™è¯¯

### âš ï¸ è­¦å‘Šé—®é¢˜ (Warnings)

4. **[WS-MSG-01]** æ¶ˆæ¯æ’¤å›/å·²è¯»äº‹ä»¶ç¼ºå°‘æ—¶é—´æˆ³å­—æ®µ
   - åç«¯æœ‰ `recalledAt`, `readAt`, å‰ç«¯ Payload ç¼ºå¤±

5. **[WS-USER-01]** ç”¨æˆ·å¯¹è±¡ç»“æ„ä¸ä¸€è‡´
   - åç«¯: `{id, name, avatar, gender}`
   - å‰ç«¯: `UserPublic` ç±»å‹å®šä¹‰éœ€ç¡®è®¤æ˜¯å¦åŒ…å« `gender`

6. **[WS-TYPING]** è¾“å…¥çŠ¶æ€ Payload å­—æ®µå¯é€‰æ€§ä¸ä¸€è‡´
   - åç«¯: `startedAt` / `stoppedAt` å¿…å¡«
   - å‰ç«¯: å‡ä¸ºå¯é€‰

7. **[WS-PRESENCE]** åœ¨çº¿çŠ¶æ€ Payload å­—æ®µå¯é€‰æ€§ä¸ä¸€è‡´
   - åç«¯: `onlineAt` / `offlineAt` å¿…å¡«
   - å‰ç«¯: å‡ä¸ºå¯é€‰

8. **[TYPE-DATE]** æ—¥æœŸç±»å‹ä¸ä¸€è‡´
   - åç«¯: `Date` å¯¹è±¡
   - å‰ç«¯: `string` (ISO 8601)
   - å½±å“: éœ€è¦åœ¨åºåˆ—åŒ–æ—¶è½¬æ¢

---

## 5. å¾…å®¡è®¡é¡¹ (TODO)

- [ ] **App.tsx WebSocket ç›‘å¬å™¨ç»‘å®šæ£€æŸ¥**
- [ ] ConversationStore çš„ setupWsListeners æ–¹æ³•
- [ ] PresenceStore çš„ setupWsListeners æ–¹æ³•
- [ ] Users æ¨¡å— REST API (7ä¸ª)
- [ ] Devices æ¨¡å— REST API (8ä¸ª)
- [ ] Conversations æ¨¡å— REST API (6ä¸ª)
- [ ] Presence æ¨¡å— REST API (4ä¸ª)
- [ ] Media æ¨¡å— REST API (4ä¸ª)
- [ ] é€šçŸ¥ç³»ç»Ÿ (Push & Navigation)
- [ ] UserPublic ç±»å‹å®šä¹‰å®Œæ•´æ€§æ£€æŸ¥

---

## 6. å®¡è®¡ç»Ÿè®¡

| ç±»åˆ« | å·²å®¡è®¡ | æ€»æ•° | è¿›åº¦ | çŠ¶æ€ |
| :--- | ---: | ---: | :--- | :--- |
| **WebSocket äº‹ä»¶** | 31 | 31 | 100% | âœ… å®Œæˆ |
| **WebSocket Payload** | 31 | 31 | 100% | âš ï¸ å‘ç° 8 å¤„ä¸ä¸€è‡´ |
| **Store ç›‘å¬å™¨** | 4 | 7 | 57% | âš ï¸ æœªç»‘å®šåˆ° App.tsx |
| **REST API** | 45 | 84 | 54% | ğŸŸ¡ è¿›è¡Œä¸­ |
| **æ•°æ®æ¨¡å‹** | 3 | 7 | 43% | ğŸŸ¡ è¿›è¡Œä¸­ |

**æ•´ä½“å®Œæˆåº¦**: çº¦ 60%

---

## 7. ä¸‹æ¬¡å®¡è®¡ä¼˜å…ˆçº§

1. **ğŸ”´ ç´§æ€¥**: ä¿®å¤ App.tsx WebSocket ç›‘å¬å™¨ç»‘å®š
2. **ğŸ”´ ç´§æ€¥**: ä¿®å¤é€šè¯äº‹ä»¶å­—æ®µä¸åŒ¹é… (answeredBy / rejectedBy)
3. **ğŸŸ¡ é‡è¦**: è¡¥å……å‰©ä½™ 39 ä¸ª REST API å®¡è®¡
4. **ğŸŸ¡ é‡è¦**: æ£€æŸ¥ UserPublic ç±»å‹å®šä¹‰
5. **ğŸŸ¢ æ¬¡è¦**: ç»Ÿä¸€æ—¥æœŸç±»å‹å¤„ç†æ–¹æ¡ˆ (Date vs string)
